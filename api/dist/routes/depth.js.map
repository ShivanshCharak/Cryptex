{"version":3,"file":"depth.js","sourceRoot":"","sources":["../../src/routes/depth.ts"],"names":[],"mappings":";;;AAAA,qCAA8B;AAC9B,kDAA8C;AAC9C,0CAAwC;AACxC,mDAAgF;AAGnE,QAAA,WAAW,GAAU,IAAA,gBAAM,GAAE,CAAA;AAE1C,mBAAW,CAAC,GAAG,CAAC,GAAG,EAAC,KAAK,EAAE,GAAG,EAAC,GAAG,EAAC,EAAE;IAC/B,0BAAgB,CAAC,GAAG,CAAC;QACf,MAAM,EAAC,MAAM;QACb,MAAM,EAAC,cAAc;KACxB,CAAC,CAAA;IACN,MAAM,EAAC,MAAM,EAAC,GAAG,GAAG,CAAC,KAAK,CAAA;IAE1B,MAAM,QAAQ,GAAG,MAAM,2BAAY,CAAC,WAAW,EAAE,CAAC,YAAY,CAAC;QAC/D,IAAI,EAAE,iBAAS;QACf,IAAI,EAAC;YACD,MAAM,EAAE,MAAgB;SAC3B;KACA,CAAC,CAAA;IACD,gCAAsB,CAAC,GAAG,CAAC;QACpB,MAAM,EAAC,OAAO;QACd,MAAM,EAAC,eAAe;QACtB,OAAO,EAAC,4BAA4B;KACvC,CAAC,CAAA;IAEN,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA;AAE9B,CAAC,CAAC,CAAA","sourcesContent":["import {Router} from 'express'\nimport { RedisManager } from '../RedisManager'\nimport {GET_DEPTH} from '../types/index'\nimport { httpTotalRequest, httpSuccessfullRequest } from '@repo/backend/metrics'\n\n\nexport const depthRouter:Router = Router()\n\ndepthRouter.get(\"/\",async (req,res)=>{\n      httpTotalRequest.inc({\n            method:\"post\",\n            routes:\"api/v1/depth\"\n        })\n    const {symbol} = req.query\n    \n    const response = await RedisManager.getInstance().sendAndAwait({\n    type: GET_DEPTH,\n    data:{\n        market: symbol as string\n    }\n    })\n     httpSuccessfullRequest.inc({\n            method:\"/post\",\n            routes:\"/api/v1/depth\",\n            message:\"depth sent to the frontend\"\n        })\n   \n    res.json(response.payload)\n\n})"]}